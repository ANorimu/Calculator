# 電卓アプリテストコーディングReadme

- コーディング工数制限３時間(主要な設計は予め実施しました。)

## 1.アプリについて

### 1.1.概要

四則演算電卓アプリをMVVM(WinForm)＋ドメイン駆動設計で実装しました。<br/>
コーディングは時間制限の中で行ったので、***実装途中の状態です***。(制限時間は少しオーバーしました。)<br/>
簡単な計算はできます。

### 1.2.注意点

Releaseでビルドすると、EXEと同じディレクトリのファイルlog.txtにログが出力されます。<br/>
ローテート設定はされていません。<br/>
必要に応じて、log4net.Release.configを編集してビルド＆実行してください。<br/>
masterブランチには、３時間のコーディング結果を格納しており、
developブランチは、その後の修正をプッシュしていきます。

### 1.3.未実装箇所

- キーボードによる入力は対応していません。
- 特にUI側が時間不足のためバグが多数混入しており、電卓として利用するにはブラッシュアップが必要です。
- ViewModelへのStateパターン(デザインパターン)の導入ができていません。
- 演算子の記号のリテラルとしての扱いがUI側とドメイン側で割れてしまっているところが改善点です。(ドメイン側だけに持たせるように改造したい)
- 操作履歴保存・読込み処理は実装できていません。
- テストコードは実装していません。

## 2.実装について

### 2.1.開発環境

- Microsoft Visual Studio Community 2022 (64 ビット) - Current Version 17.9.0
- GitHub

### 2.2.プログラミング言語

- C#12

### 2.3.モデリング手法

- MVVM
- ドメイン駆動設計

### 2.4.ソフトウェアアーキテクチャ

[詳細はこちらを参照してください](https://github.com/ANorimu/Calculator/wiki/%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%88)

CommunityToolkit.MvvmでViewとViewModelを分離しているので、***WPFへの移植***も容易です。

また、モデルレイヤーをドメイン駆動設計で実装しているので、Webアプリ、WebAPI等を実装するだけで、本実装の***計算サービスを流用***することも可能です。

未実装ですが、ドメインレイヤからインフラストラクチャへの依存を逆転させることで、***別のDB等への切り替え***も簡単にできる想定です。

テストコードは、ViewModelおよびApplicationに対して実装することを想定しています、

### 2.5.ドメイン設計

[こちらを参照してください](https://github.com/ANorimu/Calculator/wiki/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E8%A8%AD%E8%A8%88)

## 3.関数電卓機能の追加について

関数電卓機能を追加する場合、以下を想定して設計しています。

- ビューレイヤは、MaterialSkin.2のタブコントロール上に実装しているので、関数電卓用のUIを四則演算とは別のタブに追加する想定です。
- モデルレイヤは、新たな演算子用のEntityを追加する想定です。(アプリケーションクラスで入力された記号とEntityのマッチングをしている個所もswitchのcase追加が必要です。)

## 4.コーディングの記録

### 4.1 時間

| 時刻    | 内容                 | 時間   |
|-------|--------------------|------|
| 7:54  | 開始                 | 0    |
| 8:30  | パッケージインストール、ログ出力設定 | 0:36 |
| 9:00  | 休憩                 | 0:30 |
| 10:38 | Viewレイヤ実装          | 1:38 |
| 11:38 | モデルレイヤ実装           | 1:00 |
| 12:38 | 休憩                 | 1:00 |
| 12:51 | バグ修正               | 0:13 |
| 12:56 | 不要ファイル削除           | 0:05 |
| 13:07 | 未実装部分のコメント追加       | 0:11 |
|       | 総計                 | 5:13 |
|       | 準備                 | 0:36 |
|       | 休憩                 | 1:30 |
|       | 工数                 | 3:07 |

### 反省点

- UIレイヤの設計が不足しており、実装に時間がかかりました。状態遷移を予め整理しておけばStateパターンにすぐに落とし込めたと反省しています。
